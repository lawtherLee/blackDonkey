{"remainingRequest":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\src\\module-manage\\components\\luochuanfu.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\src\\module-manage\\components\\luochuanfu.vue","mtime":1666019319772},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\babel.config.js","mtime":1665578302209},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662199701179},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\babel-loader\\lib\\index.js","mtime":1661140982816},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662199701179},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\vue-loader\\lib\\index.js","mtime":1662199723728}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbGlzdCwgYWRkLCBkZXRhaWwsIHVwZGF0ZSwgcmVtb3ZlIH0gZnJvbSAnLi4vLi4vYXBpL2Jhc2UvcGVybWlzc2lvbnMnOwppbXBvcnQgeyBsaXN0IGFzIGxpc3RxdWFueHogfSBmcm9tICcuLi8uLi9hcGkvYmFzZS9tZW51cyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncGVybWlzc2lvbnMnLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDkv67mlLkKICAgICAgcm93c3M6IHsKICAgICAgICBpZDogJycsCiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIHBlcm1pc3Npb25zOiBbXSAvLyDlrZjmlL7nmoTmmK/pu5jorqTpgInkuK3nmoTlgLzlkozoh6rlt7HmlrDlop7nmoTlgLwKICAgICAgfSwKCiAgICAgIGRhdGE6IFtdLAogICAgICAvLyDnlKjmnaXlrZjmlL7moJHoioLngrnnmoTlgLwKICAgICAgZGVmYXVsdFByb3BzOiB7CiAgICAgICAgY2hpbGRyZW46ICdjaGlsZHMnLAogICAgICAgIGxhYmVsOiAndGl0bGUnCiAgICAgIH0sCiAgICAgIC8vIOaWsOWingogICAgICBmb3JtOiB7CiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIHBlcm1pc3Npb25zOiBbXQogICAgICB9LAogICAgICBnZXRLZXlzOiBbXSwKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBkaWFsb2dGb3JtVmlzaWJsZTE6IGZhbHNlLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcGFnZTogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgLy8g5b2T5YmN6aG1CiAgICAgICAgcGFnZXNpemU6IDEwLAogICAgICAgIC8vIOmhteeahOWkp+WwjwogICAgICAgIHRpdGxlOiAnJwogICAgICB9LAogICAgICBjb3VudHM6IDAsCiAgICAgIC8vIOaAu+iusOW9leaVsAogICAgICBwYWdlczogMCwKICAgICAgLy8g5oC76aG15pWwCgogICAgICB0YWJsZURhdGE6IFtdLAogICAgICBydWxlczogewogICAgICAgIHRpdGxlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi35ZCNJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLy8gZGlhbGlnIOagh+mimOaYvuekugoKICAgIHRpdGxlKCkgewogICAgICByZXR1cm4gdGhpcy5mb3JtID8gJ+e8lui+keadg+mZkOe7hCcgOiAn5Yib5bu65p2D6ZmQ57uEJzsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm9uU3VibWl0KCk7CiAgICB0aGlzLmdldHF1YW54KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmkJzntKIgKyDmuLLmn5PliJfooagKICAgIGFzeW5jIG9uU3VibWl0KCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGF0YQogICAgICAgIH0gPSBhd2FpdCBsaXN0KHRoaXMucGFnZSk7CiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSkKICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IGRhdGEubGlzdDsKICAgICAgICB0aGlzLnBhZ2UucGFnZSA9IGRhdGEucGFnZSAtIDA7CiAgICAgICAgdGhpcy5wYWdlLnBhZ2VzaXplID0gZGF0YS5wYWdlc2l6ZSAtIDA7CiAgICAgICAgdGhpcy5jb3VudHMgPSBkYXRhLmNvdW50czsKICAgICAgICBpZiAodGhpcy5jb3VudHMgPiAwICYmIGRhdGEubGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHRoaXMucGFnZS5wYWdlID0gdGhpcy5wYWdlLnBhZ2UgLSAxOwogICAgICAgICAgdGhpcy5vblN1Ym1pdCgpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIC8vIOa4heepuuaQnOe0ogogICAgZGVsU3VibWl0KCkgewogICAgICB0aGlzLnBhZ2UgPSB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICAvLyDlvZPliY3pobUKICAgICAgICBwYWdlc2l6ZTogMTAsCiAgICAgICAgLy8g6aG155qE5aSn5bCPCiAgICAgICAgdXNlcm5hbWU6ICcnCiAgICAgIH07CiAgICAgIC8vIOWGjeasoeiwg+eUqOaOpeWPo+a4suafk+mhtemdogogICAgICB0aGlzLm9uU3VibWl0KCk7CiAgICB9LAogICAgLy8g6I635Y+W5p2D6ZmQ57uE5ZCN56ewCiAgICBhc3luYyBnZXRxdWFueCgpIHsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IGF3YWl0IGxpc3RxdWFueHooKTsKICAgICAgLy8gY29uc29sZS5sb2coZGF0YSkKICAgICAgdGhpcy5kYXRhID0gZGF0YTsKICAgICAgLy8g57uZ5LiA5Liq5pyA5aSn55qE54i26IqC54K5CiAgICAgIHRoaXMuZGF0YSA9IFt7CiAgICAgICAgdGl0bGU6ICfns7vnu5/oj5zljZXlkozpobXpnaLmnYPpmZDngrknLAogICAgICAgIGNoaWxkczogZGF0YSwKICAgICAgICBpZDogMAogICAgICB9XTsKICAgIH0sCiAgICBhc3luYyBhZGRTdWJtaXQoKSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8vIOaWsOWingogICAgYXN5bmMgYWRkT2socm93KSB7CiAgICAgIGNvbnNvbGUubG9nKHJvdyk7CiAgICAgIHRoaXMuJHJlZnMuZm9ybURhdGUudmFsaWRhdGUoKTsgLy8g5Yik5pat6aqM6K+B6KeE5YiZ5piv5ZCm6YCa6L+HCiAgICAgIGNvbnN0IGFyciA9IHRoaXMuJHJlZnMudHJlZS5nZXRDaGVja2VkS2V5cygpOyAvLyDojrflj5bngrnlh7vmlbDoioLngrnnmoRpZOWtmOaUvuWIsOaVsOe7hOmHjOmdogogICAgICAvLyBjb25zb2xlLmxvZyhhcnIpCiAgICAgIHRoaXMuZm9ybS5wZXJtaXNzaW9ucyA9IGFycjsKICAgICAgdHJ5IHsKICAgICAgICAvLyDosIPnlKjmjqXlj6MKICAgICAgICBhd2FpdCBhZGQodGhpcy5mb3JtKTsKICAgICAgICB0aGlzLm9uU3VibWl0KCk7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmlrDlop7miJDlip8nKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5paw5aKe5aSx6LSlJyk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgLy8g5L+u5pS5IOWFiOaVsOaNruWbnuaYvgogICAgYXN5bmMgYnRuT2socm93KSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUxID0gdHJ1ZTsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IGF3YWl0IGRldGFpbChyb3cpOwogICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKQogICAgICB0aGlzLnJvd3NzLnBlcm1pc3Npb25zID0gZGF0YS5wZXJtaXNzaW9uczsKICAgICAgdGhpcy5yb3dzcy50aXRsZSA9IGRhdGEudGl0bGU7CiAgICAgIHRoaXMucm93c3MuaWQgPSBkYXRhLmlkOwogICAgfSwKICAgIC8vIOS/ruaUuSArIOa4suafkwogICAgYXN5bmMgYWRkT2sxKCkgewogICAgICB0aGlzLiRyZWZzLmZvcm1EYXRlLnZhbGlkYXRlKCk7IC8vIOWIpOaWremqjOivgeinhOWImeaYr+WQpumAmui/hwogICAgICAvLyDosIPnlKjmjqXlj6MKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCB1cGRhdGUodGhpcy5yb3dzcyk7CiAgICAgICAgdGhpcy5vblN1Ym1pdCgpOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJyk7CiAgICAgICAgLy8gdGhpcy5yb3dzcy5wZXJtaXNzaW9ucyA9IFtdCiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5yb3dzcy5wZXJtaXNzaW9ucykKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5L+u5pS55aSx6LSlJyk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZTEgPSBmYWxzZTsKICAgICAgICAvLyB0aGlzLnJvd3NzLnBlcm1pc3Npb25zID0gW10KICAgICAgfQogICAgfSwKCiAgICAvLyDliKDpmaQKICAgIGFzeW5jIGJ0bmRlbChyb3cpIHsKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTnlKjmiLcsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSk7CiAgICAgICAgYXdhaXQgcmVtb3ZlKHJvdyk7CiAgICAgICAgdGhpcy5vblN1Ym1pdCgpOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJyk7CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOWksei0pScpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"AA2KA;AACA;AACA;EACAA;EACAC;EAEAC;IACA;MACA;MACAC;QACAC;QACAC;QACAC;MACA;;MAEAJ;MAAA;MACAK;QACAC;QACAC;MACA;MACA;MACAC;QACAL;QACAC;MACA;MACAK;MACAC;MACAC;MACAC;MACAC;QACAA;QAAA;QACAC;QAAA;QACAX;MACA;MACAY;MAAA;MACAC;MAAA;;MAEAC;MACAC;QACAf;UAAAgB;UAAAC;UAAAC;QAAA;MACA;IACA;EACA;EACAC;IACA;;IAEAnB;MACA;IACA;EACA;EAEAoB;IACA;IACA;EACA;EACAC;IAEA;IACA;MACA;QACA;QACA;UAAAxB;QAAA;QACA;QACA;QACA;QACA;QACA;QACA;UACA;UACA;QACA;MACA;QACAyB;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACAb;QAAA;QACAC;QAAA;QACAa;MACA;MACA;MACA;IACA;IACA;IACA;MACA;QAAA3B;MAAA;MACA;MACA;MACA;MACA;QAAAG;QAAAyB;QAAA1B;MAAA;IACA;IACA;MACA;IACA;IACA;IACA;MACAuB;MACA;MACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IACA;IACA;MACA;MACA;QAAAzB;MAAA;MACA;MACA;MACA;MACA;IACA;IACA;IACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;QACA;MACA;QACA;QACA;MACA;IACA;;IACA;IACA;MACA;QACA;UACA6B;QACA;QACA;QACA;QACA;MACA;QACA;MACA;IACA;EACA;AACA","names":["name","components","data","rowss","id","title","permissions","defaultProps","children","label","form","getKeys","dialogFormVisible","dialogFormVisible1","loading","page","pagesize","counts","pages","tableData","rules","required","message","trigger","computed","created","methods","console","delSubmit","username","childs","type"],"sourceRoot":"src/module-manage/components","sources":["luochuanfu.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-card class=\"box-card\">\r\n      <!-- 头部搜索 + 新增 -->\r\n      <el-row :gutter=\"20\">\r\n        <el-form :inline=\"true\" class=\"demo-form-inline\">\r\n          <!-- 搜索 -->\r\n          <el-col :span=\"16\">\r\n            <div class=\"grid-content bg-purple\">\r\n              <!-- 搜索框 -->\r\n              <el-form-item>\r\n                <el-input v-model=\"page.title\" placeholder=\"根据用户名搜索\" />\r\n              </el-form-item>\r\n              <!-- 按钮 -->\r\n              <el-form-item>\r\n                <el-button @click=\"delSubmit\">清空</el-button>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit\">搜索</el-button>\r\n              </el-form-item>\r\n            </div>\r\n          </el-col>\r\n          <!-- 新增 -->\r\n          <el-col :span=\"6\" style=\"padding-left: 18%\">\r\n            <div class=\"grid-content bg-purple\">\r\n              <el-form-item style=\"margin-left: 18px\">\r\n                <el-button icon=\"el-icon-edit\" type=\"success\" @click=\"addSubmit\"\r\n                  >新增用户</el-button\r\n                >\r\n              </el-form-item>\r\n            </div>\r\n          </el-col>\r\n        </el-form>\r\n      </el-row>\r\n\r\n      <div\r\n        data-v-ad10840c=\"\"\r\n        role=\"alert\"\r\n        class=\"el-alert alert el-alert--info is-light\"\r\n      >\r\n        <i class=\"el-alert__icon el-icon-info\" />\r\n        <div class=\"el-alert__content\">\r\n          <span class=\"el-alert__title\">共 {{ counts }} 条记录</span>\r\n          <i class=\"el-alert__closebtn el-icon-close\" style=\"display: none\" />\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 表格 -->\r\n      <el-table\r\n        v-loading=\"loading\"\r\n        :data=\"tableData\"\r\n        style=\"width: 100%; margin-top: 18px\"\r\n      >\r\n        <el-table-column type=\"selection\" />\r\n        <el-table-column prop=\"title\" label=\"用户名\" />\r\n        <el-table-column prop=\"create_date\" label=\"日期\" sortable>\r\n          <template slot-scope=\"{ row }\">\r\n            {{ row.create_date | parseTime }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"{ row }\">\r\n            <el-button\r\n              type=\"primary\"\r\n              plain\r\n              size=\"small\"\r\n              icon=\"el-icon-edit\"\r\n              circle\r\n              @click=\"btnOk(row)\"\r\n            />\r\n            <el-button\r\n              type=\"danger\"\r\n              plain\r\n              size=\"small\"\r\n              icon=\"el-icon-delete\"\r\n              circle\r\n              @click=\"btndel(row)\"\r\n            />\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 新增弹出层 -->\r\n      <el-dialog\r\n        title=\"新增权限组\"\r\n        :visible.sync=\"dialogFormVisible\"\r\n        width=\"50%\"\r\n      >\r\n        <el-form ref=\"formDate\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n          <el-form-item label=\"用户名\" prop=\"title\">\r\n            <el-input v-model=\"form.title\" style=\"width: 300px\"></el-input>\r\n          </el-form-item>\r\n          <!-- >&nbsp; -->\r\n          <el-form-item label=\"权限分配\">\r\n            <el-tree\r\n              ref=\"tree\"\r\n              :data=\"data\"\r\n              show-checkbox\r\n              default-expand-all\r\n              node-key=\"id\"\r\n              :props=\"defaultProps\"\r\n              :getCheckedKeys=\"getKeys\"\r\n            >\r\n            </el-tree>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"addOk\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n      <!-- 修改弹出层 -->\r\n      <el-dialog\r\n        title=\"修改权限组\"\r\n        :visible.sync=\"dialogFormVisible1\"\r\n        width=\"50%\"\r\n      >\r\n        <el-form\r\n          ref=\"formDate\"\r\n          :model=\"rowss\"\r\n          :rules=\"rules\"\r\n          label-width=\"80px\"\r\n        >\r\n          <el-form-item label=\"用户名\" prop=\"title\">\r\n            <el-input v-model=\"rowss.title\" style=\"width: 300px\"></el-input>\r\n          </el-form-item>\r\n          <!-- >&nbsp; -->\r\n          <el-form-item label=\"权限分配\">\r\n            <el-tree\r\n              ref=\"tree\"\r\n              :data=\"data\"\r\n              show-checkbox\r\n              default-expand-all\r\n              node-key=\"id\"\r\n              :props=\"defaultProps\"\r\n              :getCheckedKeys=\"rowss.permissions\"\r\n              :default-checked-keys=\"rowss.permissions\"\r\n            >\r\n            </el-tree>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible1 = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"addOk1\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n\r\n      <!-- 分页 -->\r\n      <el-row :gutter=\"24\">\r\n        <el-col :span=\"8\" :push=\"14\"\r\n          ><div class=\"grid-content bg-purple\">\r\n            <div class=\"block\">\r\n              <el-pagination\r\n                v-if=\"counts > 0\"\r\n                background\r\n                :current-page.sync=\"page.page\"\r\n                :page-size.sync=\"page.pagesize\"\r\n                :page-sizes=\"[3, 6, 10, 25]\"\r\n                layout=\" prev, pager, next, sizes, jumper\"\r\n                :total=\"counts\"\r\n                @size-change=\"onSubmit\"\r\n                @current-change=\"onSubmit\"\r\n              />\r\n            </div></div\r\n        ></el-col>\r\n      </el-row>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { list, add, detail, update, remove } from '../../api/base/permissions'\r\nimport { list as listquanxz } from '../../api/base/menus'\r\nexport default {\r\n  name: 'permissions',\r\n  components: {},\r\n\r\n  data () {\r\n    return {\r\n      // 修改\r\n      rowss: {\r\n        id: '',\r\n        title: '',\r\n        permissions: [] // 存放的是默认选中的值和自己新增的值\r\n      },\r\n\r\n      data: [], // 用来存放树节点的值\r\n      defaultProps: {\r\n        children: 'childs',\r\n        label: 'title'\r\n      },\r\n      // 新增\r\n      form: {\r\n        title: '',\r\n        permissions: []\r\n      },\r\n      getKeys: [],\r\n      dialogFormVisible: false,\r\n      dialogFormVisible1: false,\r\n      loading: false,\r\n      page: {\r\n        page: 1, // 当前页\r\n        pagesize: 10, // 页的大小\r\n        title: ''\r\n      },\r\n      counts: 0, // 总记录数\r\n      pages: 0, // 总页数\r\n\r\n      tableData: [],\r\n      rules: {\r\n        title: [{ required: true, message: '请输入用户名', trigger: 'blur' }]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    // dialig 标题显示\r\n\r\n    title () {\r\n      return this.form ? '编辑权限组' : '创建权限组'\r\n    }\r\n  },\r\n\r\n  created () {\r\n    this.onSubmit()\r\n    this.getquanx()\r\n  },\r\n  methods: {\r\n\r\n    // 搜索 + 渲染列表\r\n    async onSubmit () {\r\n      try {\r\n        this.loading = true\r\n        const { data } = await list(this.page)\r\n        // console.log(data)\r\n        this.tableData = data.list\r\n        this.page.page = data.page - 0\r\n        this.page.pagesize = data.pagesize - 0\r\n        this.counts = data.counts\r\n        if (this.counts > 0 && data.list.length === 0) {\r\n          this.page.page = this.page.page - 1\r\n          this.onSubmit()\r\n        }\r\n      } catch (err) {\r\n        console.log(err)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    // 清空搜索\r\n    delSubmit () {\r\n      this.page = {\r\n        page: 1, // 当前页\r\n        pagesize: 10, // 页的大小\r\n        username: ''\r\n      }\r\n      // 再次调用接口渲染页面\r\n      this.onSubmit()\r\n    },\r\n    // 获取权限组名称\r\n    async getquanx () {\r\n      const { data } = await listquanxz()\r\n      // console.log(data)\r\n      this.data = data\r\n      // 给一个最大的父节点\r\n      this.data = [{ title: '系统菜单和页面权限点', childs: data, id: 0 }]\r\n    },\r\n    async addSubmit () {\r\n      this.dialogFormVisible = true\r\n    },\r\n    // 新增\r\n    async addOk (row) {\r\n      console.log(row)\r\n      this.$refs.formDate.validate() // 判断验证规则是否通过\r\n      const arr = this.$refs.tree.getCheckedKeys() // 获取点击数节点的id存放到数组里面\r\n      // console.log(arr)\r\n      this.form.permissions = arr\r\n      try {\r\n        // 调用接口\r\n        await add(this.form)\r\n        this.onSubmit()\r\n        this.$message.success('新增成功')\r\n      } catch (err) {\r\n        this.$message.error('新增失败')\r\n      } finally {\r\n        this.dialogFormVisible = false\r\n      }\r\n    },\r\n    // 修改 先数据回显\r\n    async btnOk (row) {\r\n      this.dialogFormVisible1 = true\r\n      const { data } = await detail(row)\r\n      // console.log(data)\r\n      this.rowss.permissions = data.permissions\r\n      this.rowss.title = data.title\r\n      this.rowss.id = data.id\r\n    },\r\n    // 修改 + 渲染\r\n    async addOk1 () {\r\n      this.$refs.formDate.validate() // 判断验证规则是否通过\r\n      // 调用接口\r\n      try {\r\n        await update(this.rowss)\r\n        this.onSubmit()\r\n        this.$message.success('修改成功')\r\n        // this.rowss.permissions = []\r\n        // console.log(this.rowss.permissions)\r\n      } catch (err) {\r\n        this.$message.error('修改失败')\r\n      } finally {\r\n        this.dialogFormVisible1 = false\r\n        // this.rowss.permissions = []\r\n      }\r\n    },\r\n    // 删除\r\n    async btndel (row) {\r\n      try {\r\n        await this.$confirm('此操作将永久删除用户, 是否继续?', '提示', {\r\n          type: 'warning'\r\n        })\r\n        await remove(row)\r\n        this.onSubmit()\r\n        this.$message.success('删除成功')\r\n      } catch (err) {\r\n        this.$message.error('删除失败')\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.box-card {\r\n  margin: 18px 18px;\r\n}\r\n.block {\r\n  margin-top: 18px;\r\n}\r\n</style>\r\n"]}]}