{"remainingRequest":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\src\\module-manage\\components\\copy.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\src\\module-manage\\components\\copy.vue","mtime":1666016236349},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\babel.config.js","mtime":1665578302209},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662199701179},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\babel-loader\\lib\\index.js","mtime":1661140982816},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662199701179},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\vue-loader\\lib\\index.js","mtime":1662199723728}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IGRldGFpbCwgdXBkYXRlLCBhZGQgfSBmcm9tICdAL2FwaS9iYXNlL3Blcm1pc3Npb25zJzsKaW1wb3J0IHsgbGlzdCB9IGZyb20gJ0AvYXBpL2Jhc2UvbWVudXMuanMnOwpsZXQgX3RoaXMgPSBbXTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd1c2Vyc0FkZCcsCiAgcHJvcHM6IFsndGV4dCcsICdwYWdlVGl0bGUnLCAncnVsZUlubGluZSddLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIFBlcm1pc3Npb25Hcm91cHNtZW51OiBbXSwKICAgICAgZGVmYXVsdFByb3BzOiB7CiAgICAgICAgbGFiZWw6ICd0aXRsZScKICAgICAgfSwKICAgICAgcGVybWlzc2lvbnM6IFtdLAogICAgICB0cmVlQ2hlY2tlZE5vZGVzOiBbXSwKICAgICAgZm9ybUJhc2U6IHsKICAgICAgICBpZDogMCwKICAgICAgICBjcmVhdGVfZGF0ZTogJycsCiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIHBlcm1pc3Npb25zOiBbXQogICAgICB9LAogICAgICBjdXJQZXJtaXNzaW9uczogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdHJlZURhdGEoKSB7CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZU5vZGUoaXRlbSkgewogICAgICAgIC8vIOWkjemAieahhumAieaLqQogICAgICAgIGxldCBjaGVja2VkID0gZmFsc2U7CiAgICAgICAgbGV0IHNlbGVjdGVkID0gZmFsc2U7CiAgICAgICAgaWYgKF90aGlzICE9PSBudWxsICYmIF90aGlzLmZvcm1CYXNlLnBlcm1pc3Npb25zLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGNvbnN0IHBlciA9IF90aGlzLmZvcm1CYXNlLnBlcm1pc3Npb25zLmZpbmQoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgewogICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09IGl0ZW0uaWQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIHNlbGVjdGVkID0gISFwZXI7CiAgICAgICAgfQogICAgICAgIC8vIOagh+iusOWLvumAiQogICAgICAgIGlmIChzZWxlY3RlZCkgewogICAgICAgICAgY29uc3QgaXNQb2ludCA9IGl0ZW0uY2hpbGRzID09PSB1bmRlZmluZWQgJiYgaXRlbS5wb2ludHMgPT09IHVuZGVmaW5lZDsKICAgICAgICAgIGNvbnN0IGhhc0NoaWxkcyA9IGl0ZW0uY2hpbGRzICE9PSB1bmRlZmluZWQgJiYgaXRlbS5jaGlsZHMubGVuZ3RoID4gMDsKICAgICAgICAgIGNvbnN0IGhhc1BvaW50cyA9IGl0ZW0ucG9pbnRzICE9PSB1bmRlZmluZWQgJiYgaXRlbS5wb2ludHMubGVuZ3RoID4gMDsKICAgICAgICAgIGlmIChpc1BvaW50KSB7CiAgICAgICAgICAgIGNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIGlmIChoYXNQb2ludHMpIHsKICAgICAgICAgICAgY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIGlmIChoYXNDaGlsZHMpIHsKICAgICAgICAgICAgY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogaXRlbS5pZCA9PT0gdW5kZWZpbmVkID8gMCA6IGl0ZW0uaWQsCiAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSwKICAgICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICAgIHNlbGVjdGVkOiBzZWxlY3RlZCwKICAgICAgICAgIGNoZWNrZWQ6IGNoZWNrZWQKICAgICAgICB9OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBhcnNlTm9kZXMobm9kZXMsIHBhcmVudE5vZGUpIHsKICAgICAgICBmb3IgKGNvbnN0IGl0IG9mIG5vZGVzKSB7CiAgICAgICAgICBjb25zdCBub2RlID0gY3JlYXRlTm9kZShpdCk7CiAgICAgICAgICAvLyDmoIforrDpgInkuK0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5vZGUuY2hlY2tlZCkKICAgICAgICAgIGlmIChub2RlLmNoZWNrZWQpIHsKICAgICAgICAgICAgcGFyZW50Tm9kZS5zZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXQuY2hpbGRzICE9PSB1bmRlZmluZWQgJiYgaXQuY2hpbGRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgcGFyc2VOb2RlcyhpdC5jaGlsZHMsIG5vZGUpOwogICAgICAgICAgfSBlbHNlIGlmIChpdC5wb2ludHMgIT09IHVuZGVmaW5lZCAmJiBpdC5wb2ludHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBwYXJzZU5vZGVzKGl0LnBvaW50cywgbm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgICBwYXJlbnROb2RlLmNoaWxkcmVuLnB1c2gobm9kZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGNvbnN0IG5vZGVzID0gY3JlYXRlTm9kZSh7CiAgICAgICAgdGl0bGU6ICfns7vnu5/oj5zljZXlkozpobXpnaLmnYPpmZDngrknLAogICAgICAgIGV4cGFuZDogdHJ1ZQogICAgICB9KTsKICAgICAgcGFyc2VOb2Rlcyh0aGlzLlBlcm1pc3Npb25Hcm91cHNtZW51LCBub2Rlcyk7CiAgICAgIHJldHVybiBbbm9kZXNdOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5by55bGC5pi+56S6CiAgICBkaWFsb2dGb3JtVigpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgLy8g5by55bGC6ZqQ6JePCiAgICBkaWFsb2dGb3JtSCgpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIC8vIOmAgOWHugogICAgaGFuZGxlQ2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2hhbmRsZUNsb3NlTW9kYWwnKTsKICAgIH0sCiAgICAvLyDooajljZXph43nva4KICAgIGhhbmRsZVJlc2V0Rm9ybSgpIHsKICAgICAgdGhpcy5mb3JtQmFzZSA9IHsKICAgICAgICBpZDogMCwKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgcGVybWlzc2lvbnM6IFtdCiAgICAgIH07CiAgICB9LAogICAgLy8g57yW6L6R6K+m5oOF5pWw5o2u5Yqg6L29CiAgICBoYW5sZGVFZGl0Rm9ybShvYmplZGl0SWQpIHsKICAgICAgdGhpcy5mb3JtQmFzZS5pZCA9IG9iamVkaXRJZDsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgaWQ6IG9iamVkaXRJZAogICAgICB9OwogICAgICBkZXRhaWwoZGF0YSkudGhlbigocmV0LCBlcnIpID0+IHsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgIH0KICAgICAgICB0aGlzLmZvcm1CYXNlLmlkID0gcmV0LmRhdGEuaWQ7CiAgICAgICAgdGhpcy5mb3JtQmFzZS50aXRsZSA9IHJldC5kYXRhLnRpdGxlOwogICAgICAgIHRoaXMuZm9ybUJhc2UucGVybWlzc2lvbnMgPSByZXQuZGF0YS5wZXJtaXNzaW9uczsKICAgICAgfSk7CiAgICB9LAogICAgc2V0dXBEYXRhKCkgewogICAgICBsaXN0KCkudGhlbihkYXRhID0+IHsKICAgICAgICB0aGlzLlBlcm1pc3Npb25Hcm91cHNtZW51ID0gZGF0YS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDoioLngrnlpI3pgInmoYbooqvpgInkuK0KICAgIGhhbmRsZUNoZWNrQ2hhbmdlKGRhdGEsIGNoZWNrZWQsIGluZGV0ZXJtaW5hdGUpIHsKICAgICAgdGhpcy50cmVlQ2hlY2tlZE5vZGVzID0gY2hlY2tlZC5jaGVja2VkTm9kZXM7CiAgICB9LAogICAgLy8g6KGo5Y2V5o+Q5LqkCiAgICBoYW5kbGVBZGQob2JqZWN0KSB7CiAgICAgIC8vIOivu+WPluWujOaVtOiKgueCuQogICAgICBjb25zdCBjdXJQZXJtaXNzaW9ucyA9IG5ldyBTZXQoKTsKICAgICAgLy8gZnVuY3Rpb24gcGFyc2Uobm9kZXMsIHNlbGVjdGVkSWQpIHsKICAgICAgLy8gICBmb3IgKGNvbnN0IGl0IG9mIG5vZGVzKSB7CiAgICAgIC8vICAgICBsZXQgaXNGaW5kID0gZmFsc2UKICAgICAgLy8gICAgIGlmIChpdC5jaGlsZHMgIT09IHVuZGVmaW5lZCkgewogICAgICAvLyAgICAgICBpc0ZpbmQgPSBwYXJzZShpdC5jaGlsZHMsIHNlbGVjdGVkSWQpCiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZiAoaXQucG9pbnRzICE9PSB1bmRlZmluZWQpIHsKICAgICAgLy8gICAgICAgaXNGaW5kID0gcGFyc2UoaXQucG9pbnRzLCBzZWxlY3RlZElkKQogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYgKGl0LmlkID09PSBzZWxlY3RlZElkKSB7CiAgICAgIC8vICAgICAgIGlzRmluZCA9IHRydWUKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmIChpc0ZpbmQpIHsKICAgICAgLy8gICAgICAgY3VyUGVybWlzc2lvbnMuYWRkKGl0LmlkKQogICAgICAvLyAgICAgICByZXR1cm4gdHJ1ZQogICAgICAvLyAgICAgfQogICAgICAvLyAgIH0KICAgICAgLy8gICByZXR1cm4gZmFsc2UKICAgICAgLy8gfQogICAgICAvLyDlt7LpgInkuK3nmoTmjqfku7boioLngrkKICAgICAgaWYgKHRoaXMudHJlZUNoZWNrZWROb2Rlcy5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLnRyZWVDaGVja2VkTm9kZXMgPSB0aGlzLiRyZWZzLnRyZWVNZW51LmdldENoZWNrZWROb2RlcygpOwogICAgICAgIGlmICh0aGlzLnRyZWVDaGVja2VkTm9kZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIOivu+WPlgogICAgICBmb3IgKGNvbnN0IGl0IG9mIHRoaXMudHJlZUNoZWNrZWROb2RlcykgewogICAgICAgIC8vIHBhcnNlKHRoaXMuUGVybWlzc2lvbkdyb3Vwc21lbnUsIGl0LmlkKQogICAgICAgIGN1clBlcm1pc3Npb25zLmFkZChpdC5pZCk7CiAgICAgIH0KICAgICAgdGhpcy5jdXJQZXJtaXNzaW9ucyA9IEFycmF5LmZyb20oY3VyUGVybWlzc2lvbnMpOwogICAgICAvLyDkv53lrZgKICAgICAgaWYgKHRoaXMuY3VyUGVybWlzc2lvbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup6ZyA6KaB55qE5p2D6ZmQ5Y+K6aG16Z2i5p2D6ZmQ54K5JywKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRhdGFGb3JtU3ViKHRoaXMuY3VyUGVybWlzc2lvbnMpOwogICAgICB9CiAgICB9LAogICAgbm9kZURhdGUobm9kZXNQYXRoLCBjdXJQZXJtaXNzaW9ucywgZmluZElkKSB7CiAgICAgIG5vZGVzUGF0aC5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaWYgKGN1clBlcm1pc3Npb25zLmluZGV4T2YoaXRlbS5pZCkgPT09IC0xKSB7CiAgICAgICAgICBjdXJQZXJtaXNzaW9ucy5wdXNoKGZpbmRJZCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBkYXRhRm9ybVN1YihjdXJQZXJtaXMpIHsKICAgICAgdGhpcy4kcmVmcy5kYXRhRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdoYW5kbGVDbG9zZU1vZGFsJyk7CiAgICAgICAgICBpZiAoX3RoaXMuZm9ybUJhc2UuaWQpIHsKICAgICAgICAgICAgY29uc3QgdGVjaG5vbG9neVR5cGVzID0gW107CiAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgIGlkOiB0aGlzLmZvcm1CYXNlLmlkLAogICAgICAgICAgICAgIHRpdGxlOiB0aGlzLmZvcm1CYXNlLnRpdGxlLAogICAgICAgICAgICAgIHBlcm1pc3Npb25zOiBjdXJQZXJtaXMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdXBkYXRlKGRhdGEpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ25ld0RhdGFlcycsIHRoaXMuZm9ybUJhc2UpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFkZCh7CiAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuZm9ybUJhc2UudGl0bGUsCiAgICAgICAgICAgICAgcGVybWlzc2lvbnM6IGN1clBlcm1pcwogICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRlbWl0KCduZXdEYXRhZXMnLCB0aGlzLmZvcm1CYXNlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJyrlj7fkuLrlv4XloavpobkhJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIC8vIOaMgui9vee7k+adnwoKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7fSwKICAvLyDliJvlu7rlrozmr5XnirbmgIEKICBjcmVhdGVkKCkgewogICAgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5zZXR1cERhdGEoKTsKICB9LAogIC8vIOe7hOS7tuabtOaWsAogIHVwZGF0ZWQ6IGZ1bmN0aW9uICgpIHt9Cn07"},{"version":3,"mappings":";AAqCA;AACA;AACA;AACA;EACAA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAL;MACA;MACAM;IACA;EACA;EACAC;IACAC;MACA;QACA;QACA;QACA;QACA;UACA;YACA;UACA;UACAC;QACA;QACA;QACA;UACA;UACA;UACA;UACA;YACAC;UACA;YACAA;UACA;YACAA;UACA;YACAA;UACA;QACA;QACA;UACAP;UACAE;UACAM;UACAF;UACAC;QACA;MACA;MACA;QACA;UACA;UACA;UACA;UACA;YACAE;UACA;UACA;YACAC;UACA;YACAA;UACA;UACAD;QACA;MACA;MACA;QAAAP;QAAAS;MAAA;MACAD;MACA;IACA;EACA;EACAE;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;QACAhB;QACAE;QACAL;MACA;IACA;IACA;IACAoB;MACA;MACA;QACAjB;MACA;MACAkB;QACA;UACA;QACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACAC;QACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;UACA;QACA;MACA;MACA;MACA;QACA;QACAnB;MACA;MACA;MACA;MACA;QACA;UACAoB;UACAC;UACAC;QACA;MACA;QACA;MACA;IACA;IACAC;MACAC;QACA;UACAxB;QACA;MACA;IACA;IACAyB;MACA;QACA;UACA;UACA;YACA;YACA;cACA5B;cACAE;cACAL;YACA;YACAgC;cACA;YACA;UACA;YACAC;cACA5B;cACAL;YACA;cACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;EACA;;EAEAkC;EACA;EACAC;IACAC;IACA;EACA;EACA;EACAC;AACA","names":["name","props","data","dialogFormVisible","PermissionGroupsmenu","defaultProps","label","permissions","treeCheckedNodes","formBase","id","create_date","title","curPermissions","computed","treeData","selected","checked","children","parentNode","parseNodes","expand","methods","dialogFormV","dialogFormH","handleClose","handleResetForm","hanldeEditForm","detail","setupData","list","handleCheckChange","handleAdd","showClose","message","type","nodeDate","nodesPath","dataFormSub","update","add","mounted","created","_this","updated"],"sourceRoot":"src/module-manage/components","sources":["copy.vue"],"sourcesContent":["<template>\r\n  <div class=\"add-form\">\r\n    <el-dialog :title=\"text + pageTitle\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form\r\n        :rules=\"ruleInline\"\r\n        ref=\"dataForm\"\r\n        :model=\"formBase\"\r\n        label-position=\"left\"\r\n        label-width=\"120px\"\r\n        style=\"width: 400px; margin-left: 120px\"\r\n      >\r\n        <el-form-item :label=\"$t('table.username')\" prop=\"title\">\r\n          <el-input v-model=\"formBase.title\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('table.powerDistriB')\">\r\n          <el-tree\r\n            ref=\"treeMenu\"\r\n            :data=\"treeData\"\r\n            show-checkbox\r\n            node-key=\"id\"\r\n            :default-expanded-keys=\"[0]\"\r\n            :default-checked-keys=\"formBase.permissions\"\r\n            :props=\"defaultProps\"\r\n            @check=\"handleCheckChange\"\r\n          ></el-tree>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\">{{ $t('table.cancel') }}</el-button>\r\n        <el-button type=\"primary\" @click=\"handleAdd('formBase')\">{{\r\n          $t('table.confirm')\r\n        }}</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { detail, update, add } from '@/api/base/permissions'\r\nimport { list } from '@/api/base/menus.js'\r\nlet _this = []\r\nexport default {\r\n  name: 'usersAdd',\r\n  props: ['text', 'pageTitle', 'ruleInline'],\r\n  data () {\r\n    return {\r\n      dialogFormVisible: false,\r\n      PermissionGroupsmenu: [],\r\n      defaultProps: {\r\n        label: 'title'\r\n      },\r\n      permissions: [],\r\n      treeCheckedNodes: [],\r\n      formBase: {\r\n        id: 0,\r\n        create_date: '',\r\n        title: '',\r\n        permissions: []\r\n      },\r\n      curPermissions: []\r\n    }\r\n  },\r\n  computed: {\r\n    treeData () {\r\n      function createNode (item) {\r\n        // 复选框选择\r\n        let checked = false\r\n        let selected = false\r\n        if (_this !== null && _this.formBase.permissions.length > 0) {\r\n          const per = _this.formBase.permissions.find(function (value, index) {\r\n            return value === item.id\r\n          })\r\n          selected = !!per\r\n        }\r\n        // 标记勾选\r\n        if (selected) {\r\n          const isPoint = item.childs === undefined && item.points === undefined\r\n          const hasChilds = item.childs !== undefined && item.childs.length > 0\r\n          const hasPoints = item.points !== undefined && item.points.length > 0\r\n          if (isPoint) {\r\n            checked = true\r\n          } else if (hasPoints) {\r\n            checked = false\r\n          } else if (hasChilds) {\r\n            checked = false\r\n          } else {\r\n            checked = true\r\n          }\r\n        }\r\n        return {\r\n          id: item.id === undefined ? 0 : item.id,\r\n          title: item.title,\r\n          children: [],\r\n          selected: selected,\r\n          checked: checked\r\n        }\r\n      }\r\n      function parseNodes (nodes, parentNode) {\r\n        for (const it of nodes) {\r\n          const node = createNode(it)\r\n          // 标记选中\r\n          // console.log(node.checked)\r\n          if (node.checked) {\r\n            parentNode.selected = true\r\n          }\r\n          if (it.childs !== undefined && it.childs.length > 0) {\r\n            parseNodes(it.childs, node)\r\n          } else if (it.points !== undefined && it.points.length > 0) {\r\n            parseNodes(it.points, node)\r\n          }\r\n          parentNode.children.push(node)\r\n        }\r\n      }\r\n      const nodes = createNode({ title: '系统菜单和页面权限点', expand: true })\r\n      parseNodes(this.PermissionGroupsmenu, nodes)\r\n      return [nodes]\r\n    }\r\n  },\r\n  methods: {\r\n    // 弹层显示\r\n    dialogFormV () {\r\n      this.dialogFormVisible = true\r\n    },\r\n    // 弹层隐藏\r\n    dialogFormH () {\r\n      this.dialogFormVisible = false\r\n    },\r\n    // 退出\r\n    handleClose () {\r\n      this.$emit('handleCloseModal')\r\n    },\r\n    // 表单重置\r\n    handleResetForm () {\r\n      this.formBase = {\r\n        id: 0,\r\n        title: '',\r\n        permissions: []\r\n      }\r\n    },\r\n    // 编辑详情数据加载\r\n    hanldeEditForm (objeditId) {\r\n      this.formBase.id = objeditId\r\n      var data = {\r\n        id: objeditId\r\n      }\r\n      detail(data).then((ret, err) => {\r\n        if (err) {\r\n          return err\r\n        }\r\n        this.formBase.id = ret.data.id\r\n        this.formBase.title = ret.data.title\r\n        this.formBase.permissions = ret.data.permissions\r\n      })\r\n    },\r\n    setupData () {\r\n      list().then(data => {\r\n        this.PermissionGroupsmenu = data.data\r\n      })\r\n    },\r\n\r\n    // 节点复选框被选中\r\n    handleCheckChange (data, checked, indeterminate) {\r\n      this.treeCheckedNodes = checked.checkedNodes\r\n    },\r\n    // 表单提交\r\n    handleAdd (object) {\r\n      // 读取完整节点\r\n      const curPermissions = new Set()\r\n      // function parse(nodes, selectedId) {\r\n      //   for (const it of nodes) {\r\n      //     let isFind = false\r\n      //     if (it.childs !== undefined) {\r\n      //       isFind = parse(it.childs, selectedId)\r\n      //     }\r\n      //     if (it.points !== undefined) {\r\n      //       isFind = parse(it.points, selectedId)\r\n      //     }\r\n      //     if (it.id === selectedId) {\r\n      //       isFind = true\r\n      //     }\r\n      //     if (isFind) {\r\n      //       curPermissions.add(it.id)\r\n      //       return true\r\n      //     }\r\n      //   }\r\n      //   return false\r\n      // }\r\n      // 已选中的控件节点\r\n      if (this.treeCheckedNodes.length === 0) {\r\n        this.treeCheckedNodes = this.$refs.treeMenu.getCheckedNodes()\r\n        if (this.treeCheckedNodes.length === 0) {\r\n          return\r\n        }\r\n      }\r\n      // 读取\r\n      for (const it of this.treeCheckedNodes) {\r\n        // parse(this.PermissionGroupsmenu, it.id)\r\n        curPermissions.add(it.id)\r\n      }\r\n      this.curPermissions = Array.from(curPermissions)\r\n      // 保存\r\n      if (this.curPermissions.length === 0) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: '请选择需要的权限及页面权限点',\r\n          type: 'error'\r\n        })\r\n      } else {\r\n        this.dataFormSub(this.curPermissions)\r\n      }\r\n    },\r\n    nodeDate (nodesPath, curPermissions, findId) {\r\n      nodesPath.map(function (item, index) {\r\n        if (curPermissions.indexOf(item.id) === -1) {\r\n          curPermissions.push(findId)\r\n        }\r\n      })\r\n    },\r\n    dataFormSub (curPermis) {\r\n      this.$refs.dataForm.validate(valid => {\r\n        if (valid) {\r\n          this.$emit('handleCloseModal')\r\n          if (_this.formBase.id) {\r\n            const technologyTypes = []\r\n            var data = {\r\n              id: this.formBase.id,\r\n              title: this.formBase.title,\r\n              permissions: curPermis\r\n            }\r\n            update(data).then(() => {\r\n              this.$emit('newDataes', this.formBase)\r\n            })\r\n          } else {\r\n            add({\r\n              title: this.formBase.title,\r\n              permissions: curPermis\r\n            }).then(() => {\r\n              this.$emit('newDataes', this.formBase)\r\n            })\r\n          }\r\n        } else {\r\n          this.$Message.error('*号为必填项!')\r\n        }\r\n      })\r\n    }\r\n  },\r\n  // 挂载结束\r\n\r\n  mounted: function () { },\r\n  // 创建完毕状态\r\n  created () {\r\n    _this = this\r\n    this.setupData()\r\n  },\r\n  // 组件更新\r\n  updated: function () { }\r\n}\r\n</script>\r\n<style>\r\n.el-tree {\r\n  margin-top: 8px;\r\n}\r\n.el-tree-node__content {\r\n  height: auto;\r\n}\r\n.el-form--label-left .el-form-item__label {\r\n  text-align: right;\r\n}\r\n.el-dialog__footer {\r\n  text-align: right;\r\n}\r\n</style>\r\n"]}]}