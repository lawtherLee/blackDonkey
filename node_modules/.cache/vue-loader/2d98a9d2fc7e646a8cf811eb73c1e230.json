{"remainingRequest":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\src\\module-manage\\components\\luochuanfu.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\src\\module-manage\\components\\luochuanfu.vue","mtime":1666019319772},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662199701179},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\babel-loader\\lib\\index.js","mtime":1661140982816},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662199701179},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\vue-loader\\lib\\index.js","mtime":1662199723728}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBsaXN0LCBhZGQsIGRldGFpbCwgdXBkYXRlLCByZW1vdmUgfSBmcm9tICcuLi8uLi9hcGkvYmFzZS9wZXJtaXNzaW9ucycNCmltcG9ydCB7IGxpc3QgYXMgbGlzdHF1YW54eiB9IGZyb20gJy4uLy4uL2FwaS9iYXNlL21lbnVzJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAncGVybWlzc2lvbnMnLA0KICBjb21wb25lbnRzOiB7fSwNCg0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy8g5L+u5pS5DQogICAgICByb3dzczogew0KICAgICAgICBpZDogJycsDQogICAgICAgIHRpdGxlOiAnJywNCiAgICAgICAgcGVybWlzc2lvbnM6IFtdIC8vIOWtmOaUvueahOaYr+m7mOiupOmAieS4reeahOWAvOWSjOiHquW3seaWsOWinueahOWAvA0KICAgICAgfSwNCg0KICAgICAgZGF0YTogW10sIC8vIOeUqOadpeWtmOaUvuagkeiKgueCueeahOWAvA0KICAgICAgZGVmYXVsdFByb3BzOiB7DQogICAgICAgIGNoaWxkcmVuOiAnY2hpbGRzJywNCiAgICAgICAgbGFiZWw6ICd0aXRsZScNCiAgICAgIH0sDQogICAgICAvLyDmlrDlop4NCiAgICAgIGZvcm06IHsNCiAgICAgICAgdGl0bGU6ICcnLA0KICAgICAgICBwZXJtaXNzaW9uczogW10NCiAgICAgIH0sDQogICAgICBnZXRLZXlzOiBbXSwNCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwNCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlMTogZmFsc2UsDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIHBhZ2U6IHsNCiAgICAgICAgcGFnZTogMSwgLy8g5b2T5YmN6aG1DQogICAgICAgIHBhZ2VzaXplOiAxMCwgLy8g6aG155qE5aSn5bCPDQogICAgICAgIHRpdGxlOiAnJw0KICAgICAgfSwNCiAgICAgIGNvdW50czogMCwgLy8g5oC76K6w5b2V5pWwDQogICAgICBwYWdlczogMCwgLy8g5oC76aG15pWwDQoNCiAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICBydWxlczogew0KICAgICAgICB0aXRsZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnlKjmiLflkI0nLCB0cmlnZ2VyOiAnYmx1cicgfV0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLy8gZGlhbGlnIOagh+mimOaYvuekug0KDQogICAgdGl0bGUgKCkgew0KICAgICAgcmV0dXJuIHRoaXMuZm9ybSA/ICfnvJbovpHmnYPpmZDnu4QnIDogJ+WIm+W7uuadg+mZkOe7hCcNCiAgICB9DQogIH0sDQoNCiAgY3JlYXRlZCAoKSB7DQogICAgdGhpcy5vblN1Ym1pdCgpDQogICAgdGhpcy5nZXRxdWFueCgpDQogIH0sDQogIG1ldGhvZHM6IHsNCg0KICAgIC8vIOaQnOe0oiArIOa4suafk+WIl+ihqA0KICAgIGFzeW5jIG9uU3VibWl0ICgpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUNCiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBsaXN0KHRoaXMucGFnZSkNCiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSkNCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSBkYXRhLmxpc3QNCiAgICAgICAgdGhpcy5wYWdlLnBhZ2UgPSBkYXRhLnBhZ2UgLSAwDQogICAgICAgIHRoaXMucGFnZS5wYWdlc2l6ZSA9IGRhdGEucGFnZXNpemUgLSAwDQogICAgICAgIHRoaXMuY291bnRzID0gZGF0YS5jb3VudHMNCiAgICAgICAgaWYgKHRoaXMuY291bnRzID4gMCAmJiBkYXRhLmxpc3QubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgdGhpcy5wYWdlLnBhZ2UgPSB0aGlzLnBhZ2UucGFnZSAtIDENCiAgICAgICAgICB0aGlzLm9uU3VibWl0KCkNCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgIH0gZmluYWxseSB7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICB9DQogICAgfSwNCiAgICAvLyDmuIXnqbrmkJzntKINCiAgICBkZWxTdWJtaXQgKCkgew0KICAgICAgdGhpcy5wYWdlID0gew0KICAgICAgICBwYWdlOiAxLCAvLyDlvZPliY3pobUNCiAgICAgICAgcGFnZXNpemU6IDEwLCAvLyDpobXnmoTlpKflsI8NCiAgICAgICAgdXNlcm5hbWU6ICcnDQogICAgICB9DQogICAgICAvLyDlho3mrKHosIPnlKjmjqXlj6PmuLLmn5PpobXpnaINCiAgICAgIHRoaXMub25TdWJtaXQoKQ0KICAgIH0sDQogICAgLy8g6I635Y+W5p2D6ZmQ57uE5ZCN56ewDQogICAgYXN5bmMgZ2V0cXVhbnggKCkgew0KICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBsaXN0cXVhbnh6KCkNCiAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpDQogICAgICB0aGlzLmRhdGEgPSBkYXRhDQogICAgICAvLyDnu5nkuIDkuKrmnIDlpKfnmoTniLboioLngrkNCiAgICAgIHRoaXMuZGF0YSA9IFt7IHRpdGxlOiAn57O757uf6I+c5Y2V5ZKM6aG16Z2i5p2D6ZmQ54K5JywgY2hpbGRzOiBkYXRhLCBpZDogMCB9XQ0KICAgIH0sDQogICAgYXN5bmMgYWRkU3VibWl0ICgpIHsNCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICAvLyDmlrDlop4NCiAgICBhc3luYyBhZGRPayAocm93KSB7DQogICAgICBjb25zb2xlLmxvZyhyb3cpDQogICAgICB0aGlzLiRyZWZzLmZvcm1EYXRlLnZhbGlkYXRlKCkgLy8g5Yik5pat6aqM6K+B6KeE5YiZ5piv5ZCm6YCa6L+HDQogICAgICBjb25zdCBhcnIgPSB0aGlzLiRyZWZzLnRyZWUuZ2V0Q2hlY2tlZEtleXMoKSAvLyDojrflj5bngrnlh7vmlbDoioLngrnnmoRpZOWtmOaUvuWIsOaVsOe7hOmHjOmdog0KICAgICAgLy8gY29uc29sZS5sb2coYXJyKQ0KICAgICAgdGhpcy5mb3JtLnBlcm1pc3Npb25zID0gYXJyDQogICAgICB0cnkgew0KICAgICAgICAvLyDosIPnlKjmjqXlj6MNCiAgICAgICAgYXdhaXQgYWRkKHRoaXMuZm9ybSkNCiAgICAgICAgdGhpcy5vblN1Ym1pdCgpDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5paw5aKe5oiQ5YqfJykNCiAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmlrDlop7lpLHotKUnKQ0KICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlDQogICAgICB9DQogICAgfSwNCiAgICAvLyDkv67mlLkg5YWI5pWw5o2u5Zue5pi+DQogICAgYXN5bmMgYnRuT2sgKHJvdykgew0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZTEgPSB0cnVlDQogICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGRldGFpbChyb3cpDQogICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKQ0KICAgICAgdGhpcy5yb3dzcy5wZXJtaXNzaW9ucyA9IGRhdGEucGVybWlzc2lvbnMNCiAgICAgIHRoaXMucm93c3MudGl0bGUgPSBkYXRhLnRpdGxlDQogICAgICB0aGlzLnJvd3NzLmlkID0gZGF0YS5pZA0KICAgIH0sDQogICAgLy8g5L+u5pS5ICsg5riy5p+TDQogICAgYXN5bmMgYWRkT2sxICgpIHsNCiAgICAgIHRoaXMuJHJlZnMuZm9ybURhdGUudmFsaWRhdGUoKSAvLyDliKTmlq3pqozor4Hop4TliJnmmK/lkKbpgJrov4cNCiAgICAgIC8vIOiwg+eUqOaOpeWPow0KICAgICAgdHJ5IHsNCiAgICAgICAgYXdhaXQgdXBkYXRlKHRoaXMucm93c3MpDQogICAgICAgIHRoaXMub25TdWJtaXQoKQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpDQogICAgICAgIC8vIHRoaXMucm93c3MucGVybWlzc2lvbnMgPSBbXQ0KICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnJvd3NzLnBlcm1pc3Npb25zKQ0KICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S/ruaUueWksei0pScpDQogICAgICB9IGZpbmFsbHkgew0KICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlMSA9IGZhbHNlDQogICAgICAgIC8vIHRoaXMucm93c3MucGVybWlzc2lvbnMgPSBbXQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g5Yig6ZmkDQogICAgYXN5bmMgYnRuZGVsIChyb3cpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGF3YWl0IHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOeUqOaItywg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7DQogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICAgIH0pDQogICAgICAgIGF3YWl0IHJlbW92ZShyb3cpDQogICAgICAgIHRoaXMub25TdWJtaXQoKQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpDQogICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Yig6Zmk5aSx6LSlJykNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg0K"},{"version":3,"sources":["luochuanfu.vue"],"names":[],"mappings":";AA2KA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"luochuanfu.vue","sourceRoot":"src/module-manage/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-card class=\"box-card\">\r\n      <!-- 头部搜索 + 新增 -->\r\n      <el-row :gutter=\"20\">\r\n        <el-form :inline=\"true\" class=\"demo-form-inline\">\r\n          <!-- 搜索 -->\r\n          <el-col :span=\"16\">\r\n            <div class=\"grid-content bg-purple\">\r\n              <!-- 搜索框 -->\r\n              <el-form-item>\r\n                <el-input v-model=\"page.title\" placeholder=\"根据用户名搜索\" />\r\n              </el-form-item>\r\n              <!-- 按钮 -->\r\n              <el-form-item>\r\n                <el-button @click=\"delSubmit\">清空</el-button>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit\">搜索</el-button>\r\n              </el-form-item>\r\n            </div>\r\n          </el-col>\r\n          <!-- 新增 -->\r\n          <el-col :span=\"6\" style=\"padding-left: 18%\">\r\n            <div class=\"grid-content bg-purple\">\r\n              <el-form-item style=\"margin-left: 18px\">\r\n                <el-button icon=\"el-icon-edit\" type=\"success\" @click=\"addSubmit\"\r\n                  >新增用户</el-button\r\n                >\r\n              </el-form-item>\r\n            </div>\r\n          </el-col>\r\n        </el-form>\r\n      </el-row>\r\n\r\n      <div\r\n        data-v-ad10840c=\"\"\r\n        role=\"alert\"\r\n        class=\"el-alert alert el-alert--info is-light\"\r\n      >\r\n        <i class=\"el-alert__icon el-icon-info\" />\r\n        <div class=\"el-alert__content\">\r\n          <span class=\"el-alert__title\">共 {{ counts }} 条记录</span>\r\n          <i class=\"el-alert__closebtn el-icon-close\" style=\"display: none\" />\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 表格 -->\r\n      <el-table\r\n        v-loading=\"loading\"\r\n        :data=\"tableData\"\r\n        style=\"width: 100%; margin-top: 18px\"\r\n      >\r\n        <el-table-column type=\"selection\" />\r\n        <el-table-column prop=\"title\" label=\"用户名\" />\r\n        <el-table-column prop=\"create_date\" label=\"日期\" sortable>\r\n          <template slot-scope=\"{ row }\">\r\n            {{ row.create_date | parseTime }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"{ row }\">\r\n            <el-button\r\n              type=\"primary\"\r\n              plain\r\n              size=\"small\"\r\n              icon=\"el-icon-edit\"\r\n              circle\r\n              @click=\"btnOk(row)\"\r\n            />\r\n            <el-button\r\n              type=\"danger\"\r\n              plain\r\n              size=\"small\"\r\n              icon=\"el-icon-delete\"\r\n              circle\r\n              @click=\"btndel(row)\"\r\n            />\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 新增弹出层 -->\r\n      <el-dialog\r\n        title=\"新增权限组\"\r\n        :visible.sync=\"dialogFormVisible\"\r\n        width=\"50%\"\r\n      >\r\n        <el-form ref=\"formDate\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n          <el-form-item label=\"用户名\" prop=\"title\">\r\n            <el-input v-model=\"form.title\" style=\"width: 300px\"></el-input>\r\n          </el-form-item>\r\n          <!-- >&nbsp; -->\r\n          <el-form-item label=\"权限分配\">\r\n            <el-tree\r\n              ref=\"tree\"\r\n              :data=\"data\"\r\n              show-checkbox\r\n              default-expand-all\r\n              node-key=\"id\"\r\n              :props=\"defaultProps\"\r\n              :getCheckedKeys=\"getKeys\"\r\n            >\r\n            </el-tree>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"addOk\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n      <!-- 修改弹出层 -->\r\n      <el-dialog\r\n        title=\"修改权限组\"\r\n        :visible.sync=\"dialogFormVisible1\"\r\n        width=\"50%\"\r\n      >\r\n        <el-form\r\n          ref=\"formDate\"\r\n          :model=\"rowss\"\r\n          :rules=\"rules\"\r\n          label-width=\"80px\"\r\n        >\r\n          <el-form-item label=\"用户名\" prop=\"title\">\r\n            <el-input v-model=\"rowss.title\" style=\"width: 300px\"></el-input>\r\n          </el-form-item>\r\n          <!-- >&nbsp; -->\r\n          <el-form-item label=\"权限分配\">\r\n            <el-tree\r\n              ref=\"tree\"\r\n              :data=\"data\"\r\n              show-checkbox\r\n              default-expand-all\r\n              node-key=\"id\"\r\n              :props=\"defaultProps\"\r\n              :getCheckedKeys=\"rowss.permissions\"\r\n              :default-checked-keys=\"rowss.permissions\"\r\n            >\r\n            </el-tree>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible1 = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"addOk1\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n\r\n      <!-- 分页 -->\r\n      <el-row :gutter=\"24\">\r\n        <el-col :span=\"8\" :push=\"14\"\r\n          ><div class=\"grid-content bg-purple\">\r\n            <div class=\"block\">\r\n              <el-pagination\r\n                v-if=\"counts > 0\"\r\n                background\r\n                :current-page.sync=\"page.page\"\r\n                :page-size.sync=\"page.pagesize\"\r\n                :page-sizes=\"[3, 6, 10, 25]\"\r\n                layout=\" prev, pager, next, sizes, jumper\"\r\n                :total=\"counts\"\r\n                @size-change=\"onSubmit\"\r\n                @current-change=\"onSubmit\"\r\n              />\r\n            </div></div\r\n        ></el-col>\r\n      </el-row>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { list, add, detail, update, remove } from '../../api/base/permissions'\r\nimport { list as listquanxz } from '../../api/base/menus'\r\nexport default {\r\n  name: 'permissions',\r\n  components: {},\r\n\r\n  data () {\r\n    return {\r\n      // 修改\r\n      rowss: {\r\n        id: '',\r\n        title: '',\r\n        permissions: [] // 存放的是默认选中的值和自己新增的值\r\n      },\r\n\r\n      data: [], // 用来存放树节点的值\r\n      defaultProps: {\r\n        children: 'childs',\r\n        label: 'title'\r\n      },\r\n      // 新增\r\n      form: {\r\n        title: '',\r\n        permissions: []\r\n      },\r\n      getKeys: [],\r\n      dialogFormVisible: false,\r\n      dialogFormVisible1: false,\r\n      loading: false,\r\n      page: {\r\n        page: 1, // 当前页\r\n        pagesize: 10, // 页的大小\r\n        title: ''\r\n      },\r\n      counts: 0, // 总记录数\r\n      pages: 0, // 总页数\r\n\r\n      tableData: [],\r\n      rules: {\r\n        title: [{ required: true, message: '请输入用户名', trigger: 'blur' }]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    // dialig 标题显示\r\n\r\n    title () {\r\n      return this.form ? '编辑权限组' : '创建权限组'\r\n    }\r\n  },\r\n\r\n  created () {\r\n    this.onSubmit()\r\n    this.getquanx()\r\n  },\r\n  methods: {\r\n\r\n    // 搜索 + 渲染列表\r\n    async onSubmit () {\r\n      try {\r\n        this.loading = true\r\n        const { data } = await list(this.page)\r\n        // console.log(data)\r\n        this.tableData = data.list\r\n        this.page.page = data.page - 0\r\n        this.page.pagesize = data.pagesize - 0\r\n        this.counts = data.counts\r\n        if (this.counts > 0 && data.list.length === 0) {\r\n          this.page.page = this.page.page - 1\r\n          this.onSubmit()\r\n        }\r\n      } catch (err) {\r\n        console.log(err)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    // 清空搜索\r\n    delSubmit () {\r\n      this.page = {\r\n        page: 1, // 当前页\r\n        pagesize: 10, // 页的大小\r\n        username: ''\r\n      }\r\n      // 再次调用接口渲染页面\r\n      this.onSubmit()\r\n    },\r\n    // 获取权限组名称\r\n    async getquanx () {\r\n      const { data } = await listquanxz()\r\n      // console.log(data)\r\n      this.data = data\r\n      // 给一个最大的父节点\r\n      this.data = [{ title: '系统菜单和页面权限点', childs: data, id: 0 }]\r\n    },\r\n    async addSubmit () {\r\n      this.dialogFormVisible = true\r\n    },\r\n    // 新增\r\n    async addOk (row) {\r\n      console.log(row)\r\n      this.$refs.formDate.validate() // 判断验证规则是否通过\r\n      const arr = this.$refs.tree.getCheckedKeys() // 获取点击数节点的id存放到数组里面\r\n      // console.log(arr)\r\n      this.form.permissions = arr\r\n      try {\r\n        // 调用接口\r\n        await add(this.form)\r\n        this.onSubmit()\r\n        this.$message.success('新增成功')\r\n      } catch (err) {\r\n        this.$message.error('新增失败')\r\n      } finally {\r\n        this.dialogFormVisible = false\r\n      }\r\n    },\r\n    // 修改 先数据回显\r\n    async btnOk (row) {\r\n      this.dialogFormVisible1 = true\r\n      const { data } = await detail(row)\r\n      // console.log(data)\r\n      this.rowss.permissions = data.permissions\r\n      this.rowss.title = data.title\r\n      this.rowss.id = data.id\r\n    },\r\n    // 修改 + 渲染\r\n    async addOk1 () {\r\n      this.$refs.formDate.validate() // 判断验证规则是否通过\r\n      // 调用接口\r\n      try {\r\n        await update(this.rowss)\r\n        this.onSubmit()\r\n        this.$message.success('修改成功')\r\n        // this.rowss.permissions = []\r\n        // console.log(this.rowss.permissions)\r\n      } catch (err) {\r\n        this.$message.error('修改失败')\r\n      } finally {\r\n        this.dialogFormVisible1 = false\r\n        // this.rowss.permissions = []\r\n      }\r\n    },\r\n    // 删除\r\n    async btndel (row) {\r\n      try {\r\n        await this.$confirm('此操作将永久删除用户, 是否继续?', '提示', {\r\n          type: 'warning'\r\n        })\r\n        await remove(row)\r\n        this.onSubmit()\r\n        this.$message.success('删除成功')\r\n      } catch (err) {\r\n        this.$message.error('删除失败')\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.box-card {\r\n  margin: 18px 18px;\r\n}\r\n.block {\r\n  margin-top: 18px;\r\n}\r\n</style>\r\n"]}]}