{"remainingRequest":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\src\\module-manage\\components\\permissions-add.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\src\\module-manage\\components\\permissions-add.vue","mtime":1666099310960},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662199701179},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\babel-loader\\lib\\index.js","mtime":1661140982816},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662199701179},{"path":"C:\\Users\\辛虞\\Desktop\\脚手架vue项目\\blackDonkey\\node_modules\\vue-loader\\lib\\index.js","mtime":1662199723728}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBkZXRhaWwsIHVwZGF0ZSwgYWRkIH0gZnJvbSAnQC9hcGkvYmFzZS9wZXJtaXNzaW9ucycNCmltcG9ydCB7IGxpc3QgfSBmcm9tICdAL2FwaS9iYXNlL21lbnVzLmpzJw0KbGV0IF90aGlzID0gW10NCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ3Blcm1pc3Npb25zQWRkJywNCiAgcHJvcHM6IFsnZGlhbG9nRm9ybVZpc2libGUnLCAndGV4dCcsICdwYWdlVGl0bGUnLCAnb2JqZWRpdElkJ10sDQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBsaXN0OiBbXSwNCiAgICAgIFBlcm1pc3Npb25Hcm91cHNtZW51OiBbXSwNCiAgICAgIGRlZmF1bHRQcm9wczogew0KICAgICAgICBsYWJlbDogJ3RpdGxlJw0KICAgICAgfSwNCiAgICAgIHBlcm1pc3Npb25zOiBbXSwNCiAgICAgIHRyZWVDaGVja2VkTm9kZXM6IFtdLA0KICAgICAgZm9ybUJhc2U6IHsNCiAgICAgICAgaWQ6IDAsDQogICAgICAgIGNyZWF0ZV9kYXRlOiAnJywNCiAgICAgICAgdGl0bGU6ICcnLA0KICAgICAgICBwZXJtaXNzaW9uczogW10NCiAgICAgIH0sDQogICAgICBjdXJQZXJtaXNzaW9uczogW10sDQogICAgICBydWxlczogew0KICAgICAgICB0aXRsZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICflv4XloasnLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICBdDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHRyZWVEYXRhICgpIHsNCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZU5vZGUgKGl0ZW0pIHsNCiAgICAgICAgLy8g5aSN6YCJ5qGG6YCJ5oupDQogICAgICAgIGxldCBjaGVja2VkID0gZmFsc2UNCiAgICAgICAgbGV0IHNlbGVjdGVkID0gZmFsc2UNCiAgICAgICAgaWYgKF90aGlzICE9PSBudWxsICYmIF90aGlzLmZvcm1CYXNlLnBlcm1pc3Npb25zPy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgY29uc3QgcGVyID0gX3RoaXMuZm9ybUJhc2UucGVybWlzc2lvbnMuZmluZChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7DQogICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09IGl0ZW0uaWQNCiAgICAgICAgICB9KQ0KICAgICAgICAgIHNlbGVjdGVkID0gISFwZXINCiAgICAgICAgfQ0KICAgICAgICAvLyDmoIforrDli77pgIkNCiAgICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgICAgY29uc3QgaXNQb2ludCA9IGl0ZW0uY2hpbGRzID09PSB1bmRlZmluZWQgJiYgaXRlbS5wb2ludHMgPT09IHVuZGVmaW5lZA0KICAgICAgICAgIGNvbnN0IGhhc0NoaWxkcyA9IGl0ZW0uY2hpbGRzICE9PSB1bmRlZmluZWQgJiYgaXRlbS5jaGlsZHMubGVuZ3RoID4gMA0KICAgICAgICAgIGNvbnN0IGhhc1BvaW50cyA9IGl0ZW0ucG9pbnRzICE9PSB1bmRlZmluZWQgJiYgaXRlbS5wb2ludHMubGVuZ3RoID4gMA0KICAgICAgICAgIGlmIChpc1BvaW50KSB7DQogICAgICAgICAgICBjaGVja2VkID0gdHJ1ZQ0KICAgICAgICAgIH0gZWxzZSBpZiAoaGFzUG9pbnRzKSB7DQogICAgICAgICAgICBjaGVja2VkID0gZmFsc2UNCiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NoaWxkcykgew0KICAgICAgICAgICAgY2hlY2tlZCA9IGZhbHNlDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNoZWNrZWQgPSB0cnVlDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgaWQ6IGl0ZW0uaWQgPT09IHVuZGVmaW5lZCA/IDAgOiBpdGVtLmlkLA0KICAgICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlLA0KICAgICAgICAgIGNoaWxkcmVuOiBbXSwNCiAgICAgICAgICBzZWxlY3RlZDogc2VsZWN0ZWQsDQogICAgICAgICAgY2hlY2tlZDogY2hlY2tlZA0KICAgICAgICB9DQogICAgICB9DQogICAgICBmdW5jdGlvbiBwYXJzZU5vZGVzIChub2RlcywgcGFyZW50Tm9kZSkgew0KICAgICAgICBmb3IgKGNvbnN0IGl0IG9mIG5vZGVzKSB7DQogICAgICAgICAgY29uc3Qgbm9kZSA9IGNyZWF0ZU5vZGUoaXQpDQogICAgICAgICAgLy8g5qCH6K6w6YCJ5LitDQogICAgICAgICAgLy8gY29uc29sZS5sb2cobm9kZS5jaGVja2VkKQ0KICAgICAgICAgIGlmIChub2RlLmNoZWNrZWQpIHsNCiAgICAgICAgICAgIHBhcmVudE5vZGUuc2VsZWN0ZWQgPSB0cnVlDQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChpdC5jaGlsZHMgIT09IHVuZGVmaW5lZCAmJiBpdC5jaGlsZHM/Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIHBhcnNlTm9kZXMoaXQuY2hpbGRzLCBub2RlKQ0KICAgICAgICAgIH0gZWxzZSBpZiAoaXQucG9pbnRzICE9PSB1bmRlZmluZWQgJiYgaXQucG9pbnRzPy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICBwYXJzZU5vZGVzKGl0LnBvaW50cywgbm9kZSkNCiAgICAgICAgICB9DQogICAgICAgICAgcGFyZW50Tm9kZS5jaGlsZHJlbi5wdXNoKG5vZGUpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGNvbnN0IG5vZGVzID0gY3JlYXRlTm9kZSh7IHRpdGxlOiAn57O757uf6I+c5Y2V5ZKM6aG16Z2i5p2D6ZmQ54K5JywgZXhwYW5kOiB0cnVlIH0pDQogICAgICBwYXJzZU5vZGVzKHRoaXMuUGVybWlzc2lvbkdyb3Vwc21lbnUsIG5vZGVzKQ0KICAgICAgcmV0dXJuIFtub2Rlc10NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDpgIDlh7oNCiAgICBoYW5kbGVDbG9zZSAoKSB7DQogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6ZGlhbG9nRm9ybVZpc2libGUnLCBmYWxzZSkNCiAgICAgIHRoaXMuJHJlZnMuZGF0YUZvcm0ucmVzZXRGaWVsZHMoKQ0KICAgICAgLy8g6KGo5Y2V6YeN572uDQogICAgICB0aGlzLmZvcm1CYXNlID0gew0KICAgICAgICBpZDogMCwNCiAgICAgICAgdGl0bGU6ICcnLA0KICAgICAgICBwZXJtaXNzaW9uczogW10NCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOe8lui+keivpuaDheaVsOaNruWKoOi9vQ0KICAgIGFzeW5jIGhhbmxkZUVkaXRGb3JtICgpIHsNCiAgICAgIHRoaXMuZm9ybUJhc2UuaWQgPSB0aGlzLm9iamVkaXRJZA0KICAgICAgdmFyIGRhdGEgPSB7DQogICAgICAgIGlkOiB0aGlzLm9iamVkaXRJZA0KICAgICAgfQ0KICAgICAgY29uc3QgcmV0ID0gYXdhaXQgZGV0YWlsKGRhdGEpDQogICAgICBjb25zb2xlLmxvZyhyZXQsIDY2NikNCiAgICAgIHRoaXMuZm9ybUJhc2UuaWQgPSByZXQuZGF0YS5pZA0KICAgICAgdGhpcy5mb3JtQmFzZS50aXRsZSA9IHJldC5kYXRhLnRpdGxlDQogICAgICB0aGlzLmZvcm1CYXNlLnBlcm1pc3Npb25zID0gcmV0LmRhdGEucGVybWlzc2lvbnMNCiAgICB9LA0KICAgIGFzeW5jIHNldHVwRGF0YSAoKSB7DQogICAgICAvLyBkYXRh5piv5oiQ5Yqf5pe26L+U5Zue55qE5pWw5o2uDQogICAgICAvLyBsaXN0KCkudGhlbihkYXRhID0+IHsNCiAgICAgIC8vICAgdGhpcy5QZXJtaXNzaW9uR3JvdXBzbWVudSA9IGRhdGEuZGF0YQ0KICAgICAgLy8gfSkNCiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgbGlzdCgpDQogICAgICB0aGlzLlBlcm1pc3Npb25Hcm91cHNtZW51ID0gZGF0YQ0KICAgIH0sDQoNCiAgICAvLyDoioLngrnlpI3pgInmoYbooqvpgInkuK0NCiAgICBoYW5kbGVDaGVja0NoYW5nZSAoZGF0YSwgY2hlY2tlZCwgaW5kZXRlcm1pbmF0ZSkgew0KICAgICAgdGhpcy50cmVlQ2hlY2tlZE5vZGVzID0gY2hlY2tlZC5jaGVja2VkTm9kZXMNCiAgICAgIHRoaXMubGlzdCA9IHRoaXMudHJlZUNoZWNrZWROb2Rlcw0KICAgICAgdGhpcy5mb3JtQmFzZS5wZXJtaXNzaW9ucyA9IHRoaXMubGlzdC5tYXAoaXRlbSA9PiB7DQogICAgICAgIHJldHVybiBpdGVtLmlkDQogICAgICB9KQ0KICAgICAgLy8gY29uc29sZS5sb2coNjkzLCB0aGlzLmZvcm1CYXNlLnBlcm1pc3Npb25zKQ0KICAgIH0sDQoNCiAgICAvLyDooajljZXmj5DkuqQNCiAgICBhc3luYyBoYW5kbGVBZGQgKG9iamVjdCkgew0KICAgICAgLy8g6K+75Y+W5a6M5pW06IqC54K5DQogICAgICBjb25zdCBjdXJQZXJtaXNzaW9ucyA9IG5ldyBTZXQoKQ0KICAgICAgY29uc29sZS5sb2coY3VyUGVybWlzc2lvbnMpDQogICAgICAvLyDlt7LpgInkuK3nmoTmjqfku7boioLngrkNCiAgICAgIGlmICh0aGlzLnRyZWVDaGVja2VkTm9kZXM/Lmxlbmd0aCA9PT0gMCkgew0KICAgICAgICB0aGlzLnRyZWVDaGVja2VkTm9kZXMgPSB0aGlzLiRyZWZzLnRyZWVNZW51LmdldENoZWNrZWROb2RlcygpDQogICAgICAgIGlmICh0aGlzLnRyZWVDaGVja2VkTm9kZXM/Lmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICB9DQogICAgICAvLyDor7vlj5YNCiAgICAgIGZvciAoY29uc3QgaXQgb2YgdGhpcy50cmVlQ2hlY2tlZE5vZGVzKSB7DQogICAgICAgIC8vIHBhcnNlKHRoaXMuUGVybWlzc2lvbkdyb3Vwc21lbnUsIGl0LmlkKQ0KICAgICAgICBjdXJQZXJtaXNzaW9ucy5hZGQoaXQuaWQpDQogICAgICB9DQogICAgICB0aGlzLmN1clBlcm1pc3Npb25zID0gQXJyYXkuZnJvbShjdXJQZXJtaXNzaW9ucykNCiAgICAgIC8vIOS/neWtmA0KICAgICAgaWYgKHRoaXMuY3VyUGVybWlzc2lvbnMubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup6ZyA6KaB55qE5p2D6ZmQ5Y+K6aG16Z2i5p2D6ZmQ54K5JywNCiAgICAgICAgICB0eXBlOiAnZXJyb3InDQogICAgICAgIH0pDQogICAgICB9DQogICAgICB0aGlzLm9iamVkaXRJZCA/IGF3YWl0IHVwZGF0ZSh0aGlzLmZvcm1CYXNlKSA6IGF3YWl0IGFkZCh0aGlzLmZvcm1CYXNlKQ0KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHRoaXMub2JqZWRpdElkID86J+aWsOWinuaIkOWKnycpDQogICAgICB0aGlzLiRwYXJlbnQuZ2V0UGVybWlzc2lvbnNMaXN0KCkNCiAgICAgIHRoaXMuaGFuZGxlQ2xvc2UoKQ0KICAgIH0sDQogICAgbm9kZURhdGUgKG5vZGVzUGF0aCwgY3VyUGVybWlzc2lvbnMsIGZpbmRJZCkgew0KICAgICAgbm9kZXNQYXRoLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsNCiAgICAgICAgaWYgKGN1clBlcm1pc3Npb25zLmluZGV4T2YoaXRlbS5pZCkgPT09IC0xKSB7DQogICAgICAgICAgY3VyUGVybWlzc2lvbnMucHVzaChmaW5kSWQpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfQ0KICB9LA0KICAvLyDmjILovb3nu5PmnZ8NCg0KICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7IH0sDQogIC8vIOWIm+W7uuWujOavleeKtuaAgQ0KICBjcmVhdGVkICgpIHsNCiAgICBfdGhpcyA9IHRoaXMNCiAgICB0aGlzLnNldHVwRGF0YSgpDQogIH0sDQogIC8vIOe7hOS7tuabtOaWsA0KICB1cGRhdGVkOiBmdW5jdGlvbiAoKSB7IH0NCn0NCg=="},{"version":3,"sources":["permissions-add.vue"],"names":[],"mappings":";AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"permissions-add.vue","sourceRoot":"src/module-manage/components","sourcesContent":["<template>\r\n  <div class=\"add-form\">\r\n    <el-dialog\r\n      :title=\"objeditId ? '编辑权限组' : '创建权限组'\"\r\n      :visible=\"dialogFormVisible\"\r\n      @close=\"handleClose\"\r\n    >\r\n      <el-form\r\n        :rules=\"rules\"\r\n        ref=\"dataForm\"\r\n        :model=\"formBase\"\r\n        label-position=\"left\"\r\n        label-width=\"120px\"\r\n        style=\"width: 400px; margin-left: 120px\"\r\n      >\r\n        <el-form-item :label=\"$t('table.username')\" prop=\"title\">\r\n          <el-input v-model=\"formBase.title\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('table.powerDistriB')\">\r\n          <el-tree\r\n            ref=\"treeMenu\"\r\n            :data=\"treeData\"\r\n            show-checkbox\r\n            node-key=\"id\"\r\n            :default-expanded-keys=\"[0]\"\r\n            :default-checked-keys=\"formBase.permissions\"\r\n            :props=\"defaultProps\"\r\n            @check=\"handleCheckChange\"\r\n          ></el-tree>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\">{{ $t('table.cancel') }}</el-button>\r\n        <el-button type=\"primary\" @click=\"handleAdd('formBase')\">{{\r\n          $t('table.confirm')\r\n        }}</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { detail, update, add } from '@/api/base/permissions'\r\nimport { list } from '@/api/base/menus.js'\r\nlet _this = []\r\nexport default {\r\n  name: 'permissionsAdd',\r\n  props: ['dialogFormVisible', 'text', 'pageTitle', 'objeditId'],\r\n  data () {\r\n    return {\r\n      list: [],\r\n      PermissionGroupsmenu: [],\r\n      defaultProps: {\r\n        label: 'title'\r\n      },\r\n      permissions: [],\r\n      treeCheckedNodes: [],\r\n      formBase: {\r\n        id: 0,\r\n        create_date: '',\r\n        title: '',\r\n        permissions: []\r\n      },\r\n      curPermissions: [],\r\n      rules: {\r\n        title: [\r\n          { required: true, message: '必填', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    treeData () {\r\n      function createNode (item) {\r\n        // 复选框选择\r\n        let checked = false\r\n        let selected = false\r\n        if (_this !== null && _this.formBase.permissions?.length > 0) {\r\n          const per = _this.formBase.permissions.find(function (value, index) {\r\n            return value === item.id\r\n          })\r\n          selected = !!per\r\n        }\r\n        // 标记勾选\r\n        if (selected) {\r\n          const isPoint = item.childs === undefined && item.points === undefined\r\n          const hasChilds = item.childs !== undefined && item.childs.length > 0\r\n          const hasPoints = item.points !== undefined && item.points.length > 0\r\n          if (isPoint) {\r\n            checked = true\r\n          } else if (hasPoints) {\r\n            checked = false\r\n          } else if (hasChilds) {\r\n            checked = false\r\n          } else {\r\n            checked = true\r\n          }\r\n        }\r\n        return {\r\n          id: item.id === undefined ? 0 : item.id,\r\n          title: item.title,\r\n          children: [],\r\n          selected: selected,\r\n          checked: checked\r\n        }\r\n      }\r\n      function parseNodes (nodes, parentNode) {\r\n        for (const it of nodes) {\r\n          const node = createNode(it)\r\n          // 标记选中\r\n          // console.log(node.checked)\r\n          if (node.checked) {\r\n            parentNode.selected = true\r\n          }\r\n          if (it.childs !== undefined && it.childs?.length > 0) {\r\n            parseNodes(it.childs, node)\r\n          } else if (it.points !== undefined && it.points?.length > 0) {\r\n            parseNodes(it.points, node)\r\n          }\r\n          parentNode.children.push(node)\r\n        }\r\n      }\r\n      const nodes = createNode({ title: '系统菜单和页面权限点', expand: true })\r\n      parseNodes(this.PermissionGroupsmenu, nodes)\r\n      return [nodes]\r\n    }\r\n  },\r\n  methods: {\r\n    // 退出\r\n    handleClose () {\r\n      this.$emit('update:dialogFormVisible', false)\r\n      this.$refs.dataForm.resetFields()\r\n      // 表单重置\r\n      this.formBase = {\r\n        id: 0,\r\n        title: '',\r\n        permissions: []\r\n      }\r\n    },\r\n    // 编辑详情数据加载\r\n    async hanldeEditForm () {\r\n      this.formBase.id = this.objeditId\r\n      var data = {\r\n        id: this.objeditId\r\n      }\r\n      const ret = await detail(data)\r\n      console.log(ret, 666)\r\n      this.formBase.id = ret.data.id\r\n      this.formBase.title = ret.data.title\r\n      this.formBase.permissions = ret.data.permissions\r\n    },\r\n    async setupData () {\r\n      // data是成功时返回的数据\r\n      // list().then(data => {\r\n      //   this.PermissionGroupsmenu = data.data\r\n      // })\r\n      const { data } = await list()\r\n      this.PermissionGroupsmenu = data\r\n    },\r\n\r\n    // 节点复选框被选中\r\n    handleCheckChange (data, checked, indeterminate) {\r\n      this.treeCheckedNodes = checked.checkedNodes\r\n      this.list = this.treeCheckedNodes\r\n      this.formBase.permissions = this.list.map(item => {\r\n        return item.id\r\n      })\r\n      // console.log(693, this.formBase.permissions)\r\n    },\r\n\r\n    // 表单提交\r\n    async handleAdd (object) {\r\n      // 读取完整节点\r\n      const curPermissions = new Set()\r\n      console.log(curPermissions)\r\n      // 已选中的控件节点\r\n      if (this.treeCheckedNodes?.length === 0) {\r\n        this.treeCheckedNodes = this.$refs.treeMenu.getCheckedNodes()\r\n        if (this.treeCheckedNodes?.length === 0) {\r\n          return\r\n        }\r\n      }\r\n      // 读取\r\n      for (const it of this.treeCheckedNodes) {\r\n        // parse(this.PermissionGroupsmenu, it.id)\r\n        curPermissions.add(it.id)\r\n      }\r\n      this.curPermissions = Array.from(curPermissions)\r\n      // 保存\r\n      if (this.curPermissions.length === 0) {\r\n        this.$message({\r\n          showClose: true,\r\n          message: '请选择需要的权限及页面权限点',\r\n          type: 'error'\r\n        })\r\n      }\r\n      this.objeditId ? await update(this.formBase) : await add(this.formBase)\r\n      this.$message.success(this.objeditId ?:'新增成功')\r\n      this.$parent.getPermissionsList()\r\n      this.handleClose()\r\n    },\r\n    nodeDate (nodesPath, curPermissions, findId) {\r\n      nodesPath.map(function (item, index) {\r\n        if (curPermissions.indexOf(item.id) === -1) {\r\n          curPermissions.push(findId)\r\n        }\r\n      })\r\n    }\r\n  },\r\n  // 挂载结束\r\n\r\n  mounted: function () { },\r\n  // 创建完毕状态\r\n  created () {\r\n    _this = this\r\n    this.setupData()\r\n  },\r\n  // 组件更新\r\n  updated: function () { }\r\n}\r\n</script>\r\n<style>\r\n.el-tree {\r\n  margin-top: 8px;\r\n}\r\n.el-tree-node__content {\r\n  height: auto;\r\n}\r\n.el-form--label-left .el-form-item__label {\r\n  text-align: right;\r\n}\r\n.el-dialog__footer {\r\n  text-align: right;\r\n}\r\n</style>\r\n"]}]}